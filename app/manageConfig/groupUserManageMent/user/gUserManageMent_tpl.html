<div>
    <div trs-scroll-fix class="row edit_right_head">
        <div class="col-md-8">
            <button class="btn btn-default btn-commen" ng-click="newUser()" ng-show="status.searchStatusSelected.value==30 && data.parentGroupid==null" ng-mouseenter="status.batchOperateBtn['hoverStatus']='new'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.open.xinjian']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='new'?'b1-1.png':'b1.png'}}" /></span> 新建用户
            </button>
            <button class="btn btn-default btn-commen" ng-click="addUsers()" ng-show="status.searchStatusSelected.value==30 && data.parentGroupid!=null" ng-mouseenter="status.batchOperateBtn['hoverStatus']='add'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.open.daoru']||status.btnRights['import']">
                <span class="s_icon1"><img ng-src="./manageConfig/groupUserManageMent/images/{{status.batchOperateBtn['hoverStatus']=='add'?'addUser-1.png':'addUser.png'}}" /></span> 添加用户
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="removeUsers()" ng-show="status.searchStatusSelected.value==30 && data.parentGroupid!=null" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='remove'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['removeuser']">
                <span class="s_icon1"><img ng-src="./manageConfig/groupUserManageMent/images/{{status.batchOperateBtn['hoverStatus']=='remove'&&data.selectedArray.length>0?'removeUser-1.png':'removeUser.png'}}" /></span> 移除用户
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="deleteUsers()" ng-show="status.searchStatusSelected.value==30||status.searchStatusSelected.value==''" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='delete'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.open.shanchu']||status.btnRights['delete']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='delete'&&data.selectedArray.length>0?'fg2-1.png':'fg2.png'}}" /></span> 删除用户
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="resetPassword()" ng-show="status.searchStatusSelected.value==30||status.searchStatusSelected.value==''" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='reset'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.open.chongzhimima']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='reset'?'b5-1.png':'b5.png'}}" /></span> 重置密码
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="moveUser()" ng-show="status.searchStatusSelected.value==30 && data.parentGroupid!=null" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='move'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['move']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='move'?'b2-1.png':'b2.png'}}" /></span> 移动用户
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="disableUser()" ng-show="status.searchStatusSelected.value==30||status.searchStatusSelected.value==''" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='stop'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.open.tingyong']||status.btnRights['stop']">
                <span class="s_icon1"><img ng-src="./manageConfig/images/{{status.batchOperateBtn['hoverStatus']=='stop'?'gb1-1.png':'gb1.png'}}"/></span> 停用用户
            </button>
            <button ng-show="status.searchStatusSelected.value==20||status.searchStatusSelected.value==''" class="btn btn-default btn-commen opacity100" ng-click="reStartUser()" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='reStart'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.disable.qiyong']||status.btnRights['qiyong']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='reStart'?'fg1-1.png':'fg1.png'}}"/></span> 启用用户
            </button>
            <button ng-show="status.searchStatusSelected.value==10||status.searchStatusSelected.value==''" class="btn btn-default btn-commen opacity100" ng-click="recoveryUser()" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='reStart'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.delete.huanyuan']||status.btnRights['huanyuan']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='reStart'?'zm38-1.png':'zm38.png'}}"/></span> 还原用户
            </button>
            <button class="btn btn-default btn-commen opacity100" ng-click="addUsersToGroup()" ng-disabled="data.selectedArray.length<1" ng-mouseenter="status.batchOperateBtn['hoverStatus']='addGroup'" ng-mouseleave="status.batchOperateBtn['hoverStatus']=''" ng-if="status.btnRights['user.undistributed.addgroup']">
                <span class="s_icon1"><img ng-src="./editingCenter/app/images/{{status.batchOperateBtn['hoverStatus']=='addGroup'?'b1-1.png':'b1.png'}}"/></span> 添加到组织
            </button>
            <!--  <button class="btn btn-default btn-commen" ng-click="importUser()">
                    <span class="s_icon1"><img src="./editingCenter/app/images/b2.png" /></span> 导入用户
                </button> -->
        </div>
        <div class="col-md-4">
            <ol class="breadcrumb pull-right edit_breadcrumb" ng-if="data.currGroup.GNAME==null">
                <li><a>组织用户管理</a></li>
                <li>></li>
                <li><a>用户管理</a></li>
            </ol>
            <ol class="breadcrumb pull-right edit_breadcrumb" ng-show="data.currGroup.GNAME!=null">
                <li><a>组织用户管理</a></li>
                <li>></li>
                <li><a>组织管理</a></li>
                <li>></li>
                <li class="active" ng-bind="data.currGroup.GNAME"></li>
            </ol>
        </div>
    </div>
    <div class="row edit_right_mid">
        <div class="col-md-8 s_onlyme_div">
            <div ng-show="data.parentGroupid!=null">
                <span class="s_onlyme">筛选:</span>
                <trs-single-select selected-option="status.searchStatusSelected" callback="queryByDropdown('name',status.searchStatusSelected)" options="status.searchStatusOptions"></trs-single-select>
                <span class="s_onlyme">管理当前组织子组织:</span>
                <a class="cursorPointer" ng-click="goGroupState()"><img src="./manageConfig/images/user-manage-icon1.png" alt="" /></a>
            </div>
            
        </div>
        <div class="col-md-4">
            <div class="input-group edit_input_group">
                <input type="text" class="form-control edit_form_control" placeholder="请输入关键字搜索" ng-model="data.keywords" ng-keypress="userNameSearch($event)">
                <span class="input-group-btn">
                        <button class="btn btn-default btn_edit_search" type="button" ng-click="userNameSearch()">搜索</button>
                    </span>
            </div>
        </div>
    </div>
    <div class="edit_table mlr-15">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="td-check col-cbx">
                        <trs-checkbox ischecked="userDatas.length>0&&data.selectedArray.length==userDatas.length" callback="selectAll()"></trs-checkbox>
                    </th>
                    <th class="td-number col-index">序号</th>
                    <th>用户名</th>
                    <th class="xcol-usergroup-state">当前状态</th>
                    <th>真实姓名</th>
                    <th class="xcol-usergroup-crtime">注册时间</th>
                    <th class="xcol-usergroup-crtime">开通时间</th>
                    <th class="xcol-usergroup-user-operation" ng-show="status.searchStatusSelected.value==30  || status.searchStatusSelected.value==''">操作</th>
                    <th class="xcol-usergroup-adjustOrder" ng-show="status.searchStatusSelected.value==30">排序</th>
                </tr>
            </thead>
            <tbody dnd-list="in users" dnd-allowed-types="['itemsType']" dnd-external-sources="false" dnd-dragover="dragoverCallback(event, index, external, type)" dnd-drop="dropCallback(event, index, item, external, type, 'itemsType')">
                <tr ng-repeat="item in users" dnd-dragstart="dragStart(event,item,$index)" dnd-type="'itemsType'" dnd-effect-allowed="move" dnd-draggable="item" dnd-moved="users.splice($index, 1)" draggable="true">
                    <td class="td-check">
                        <trs-checkbox ischecked="data.selectedArray.indexOf(item)<0?false:true" callback="selectDoc(item)"></trs-checkbox>
                    </td>
                    <td ng-bind="(page.CURRPAGE-1)*page.PAGESIZE+$index+1"></td>
                    <td ng-bind="item.USERNAME" class="userpinyin" ng-click="showUserDetail(item)"></td>
                    <td ng-bind="userStatus[item.STATUS]"></td>
                    <td ng-bind="item.TRUENAME"></td>
                    <td ng-bind="item.CRTIME |date:'yy-MM-dd HH:mm'"></td>
                    <td ng-bind="item.REGTIME | date:'yy-MM-dd HH:mm'"></td>
                    <td class="user-td-img" ng-if="status.searchStatusSelected.value==30 || status.searchStatusSelected.value==''">
                        <img ng-if="item.STATUS==30" ng-click="editUser(item,'role')" src="./manageConfig/images/user-manage-icon3.png" title="角色设置">
                        <img ng-if="item.STATUS==30" ng-click="editUser(item,'group')" src="./manageConfig/images/user-manage-icon4.png" title="所属组织">
                        <!--  <img src="./manageConfig/images/user-manage-icon5.png"> -->
                        <img ng-if="item.STATUS==30" ng-click="editUser(item,'userInfo')" src="./manageConfig/images/user-manage-icon6.png" title="用户信息">
                        <!--    <img ng-click="userMap(item)" src="./manageConfig/images/user-manage-icon7.png"> -->
                    </td>
                    <td class="user-td-img" ng-show="status.searchStatusSelected.value==30">
                        <a href="javascript:void(0);" ng-click="sortUser(item)" class="a-adjust">调整到</a>
                    </td>
                    <!-- <td class="user-td-img" ng-show="status.searchStatusSelected.value!=30">
                        <button class="btn btn-default a-adjust a-adjust_disabled" disabled="disabled">调整到</button>
                    </td> -->
                </tr>
                <tr class="dndPlaceholder drag_place_list">
                    <td colspan="9"><i>选定位置后松开鼠标</i></td>
                </tr>
            </tbody>
        </table>
        <div class="page">
            <trs-pagenation-left page-count="page" callback="selectPageNum()" is-select-pagecount="true"></trs-pagenation-left>
            <pagination total-items="page.ITEMCOUNT" ng-change="pageChanged()" ng-model="page.CURRPAGE" max-size="6" class="pagination-sm page_left" boundary-links="true" items-per-page="page.PAGESIZE" rotate="false" num-pages="page.PAGECOUNT" first-text="首页" previous-text="上一页" next-text="下一页" last-text="末页"></pagination>
            <trs-pagenation-right callback="jumpToPage()" currpage="data.copyCurrPage" page="page"></trs-pagenation-right>
        </div>
    </div>
    <div cg-busy="loadingPromise"></div>
</div>
